<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jadwal Sholat</title>
  <link href="css/style.css" rel="stylesheet">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap" rel="stylesheet">
</head>
<body>
	<div class="container text-center">
		<h1>Jadwal Sholat</h1>
		<div id="waktu"></div>
<div class="table-responsive">
    <table class="table-striped table">
        <thead>
            <tr>
                <th>Tanggal</th>
                <th>Imsak</th>
                <th>Subuh</th>
                <th>Dzuhur</th>
                <th>Ashar</th>
                <th>Maghrib</th>
                <th>Isya</th>
            </tr>
        </thead>
        <tbody>
            
        </tbody>

    </table>
    </div><input type="date" class="hidden" id="jadwal">
<strong>NB: Mungkin ada perbedaan beberapa menit</strong>
</div>
  <script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
  <script>
   var newDate = new Date();
var senin = newDate.getDay();
var getHari = newDate.getDate();
var getBulan = newDate.getMonth() + 1;
var getTahun = newDate.getFullYear();

var monthWording = {
    '1': 'Januari',
    '2': 'Februari',
    '3': 'Maret',
    '4': 'April',
    '5': 'Mei',
    '6': 'Juni',
    '7': 'Juli',
    '8': 'Agustus',
    '9': 'September',
    '10': 'Oktober',
    '11': 'November',
    '12': 'Desember',
}

var hariWording = {
    '1': 'Senin',
    '2': 'Selasa',
    '3': 'Rabu',
    '4': 'Kamis',
    '5': 'Jumat',
    '6': 'Sabtu',
    '0': 'Ahad'
}

var timeHighlight = `
    <div> ${monthWording[getBulan]} ${getTahun}</div>
`

$("#waktu").append(timeHighlight);

function jadwal(){
var today = new Date();
var dd = today.getDate();
var mm = today.getMonth() + 1; //January is 0!
var yyyy = today.getFullYear();
if (dd < 10) {
    dd = '0' + dd
}
if (mm < 10) {
    mm = '0' + mm
}

var min_yyyy = yyyy - 2;
today = yyyy + '-' + mm + '-' + dd;
var jadwal = document.getElementById('jadwal').setAttribute("value", today);

console.log(jadwal)

var city= 'jakarta';
$.ajax({
	//url : 'https://api.pray.zone/v2/times/day.json?city=jakarta&date=2021-04-14',
  url: 'https://api.pray.zone/v2/times/this_month.json?city=jakarta',
  method: 'GET',
  //data: {city: city, date: jadwal}, 
  /*success: (response)=>{
  	
  	$('.imsak').text(response.results.datetime[0].times.Imsak);
    $('.subuh').text(response.results.datetime[0].times.Fajr);
    $('.dzuhur').text(response.results.datetime[0].times.Dhuhr);
    $('.ashar').text(response.results.datetime[0].times.Asr);
    $('.maghrib').text(response.results.datetime[0].times.Maghrib);
    $('.isya').text(response.results.datetime[0].times.Isha);
  }*/
  success: (response) => {
  	console.log(response.results.datetime.length);
    var a;
    for (a=0; a<response.results.datetime.length; a++) {
    
    	$('tbody').append(`
      		<tr>
          <td class="imsak">${response.results.datetime[a].date.gregorian}</td>
                <td class="imsak">${response.results.datetime[a].times.Imsak}</td>
                <td class="subuh">${response.results.datetime[a].times.Fajr}</td>
                <td class="dzuhur">${response.results.datetime[a].times.Dhuhr}</td>
                <td class="ashar">${response.results.datetime[a].times.Asr}</td>
                <td class="maghrib">${response.results.datetime[a].times.Maghrib}</td>
                <td class="isya">${response.results.datetime[a].times.Isha}</td>
            </tr>
      `)
    
    }
  }
})

}

jadwal();
  </script>
</body>
</html>
